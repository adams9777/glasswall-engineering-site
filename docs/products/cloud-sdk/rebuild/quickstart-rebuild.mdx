---
title: Quickstart - Rebuild
id: rebuild-quickstart
sidebar_label: Quickstart
---

<p>
This page can be used as a guide to getting started using the Rebuild API. It describes getting the product key and executing a request to the API.
</p>

<p>Just want to call the API?</p>

[![Run in Postman](https://run.pstmn.io/button.svg)](https://app.getpostman.com/run-collection/dc8ba5f0a4ecfa29ad12)

<div>
<h2>Get Key</h2>

A key is required to access the Glasswlal Rebuild API, one can be purchased [here](https://glasswall-store.com/products/glasswall-rebuild-cloud-in-shared-cloud-environment?variant=33476559274124)

<h2>Http Code - Rebuild File</h2>

<p>In the following steps choose a language to get started with using the endpoints programmatically.</p>

A known good file for executing the request can be downloaded  <a href="/examples/Rebuild_Example_Image_That_Rebuilds.bmp" download>here</a>

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<h3>Sample Code</h3>

<p>The following code samples show the flow of getting a file rebuilt via the Rebuild API</p>

<Tabs
  defaultValue="nodejs"
  values={[
    { label: 'NodeJs', value: 'nodejs', },
    { label: 'Python', value: 'py', },
    { label: 'C#', value: 'c#', },
  ]
}>
<TabItem value="nodejs">

```javascript
const request = require("request");
const fs = require("fs");

const apiKey = "YOUR API KEY";
const inputFilePath = "INPUT FILE PATH";
const url = "https://8oiyjy8w63.execute-api.us-west-2.amazonaws.com/Prod/api/rebuild/file";

const options = {
    "encoding": null,
    "method": "POST",
    "url": url,
    "headers": {
        "x-api-key": apiKey,
        'Accept': 'application/octet-stream'
    },
    formData: {
        "file": {
            "value": fs.createReadStream(inputFilePath),
            "options": {
                "filename": "/" + inputFilePath,
                "contentType": null
            }
        }
    }
}

request(options, function (error, res) {
  if (error) throw new Error(error);
  let data = res.body // res is the response coming from the API
  let buf = Buffer.from(data);
  
  console.log(buf.length);
  const outputFilePath = "Rebuilt File Output Path"

  // callback passed to request
  request(options, function (error, res) {
    if (error) throw new Error(error);
    if (!(res.statusCode == 200 && res.body)) return;    

    let data = res.body // res is the response coming from the API
    let buf = Buffer.from(data);
    let file = fs.createWriteStream(outputFilePath);

    file.write(buf);
    file.end();
  });
});
```

</TabItem>
<TabItem value="py">

```python
# This Python snippet makes use of the requests library
# Get it with pip: "pip install requests" or read the docs:
# https://requests.readthedocs.io/en/master/user/install/

import os
import requests

api_key = "YOUR_API_KEY"
url = "https://8oiyjy8w63.execute-api.us-west-2.amazonaws.com/Prod/api/rebuild/file"
input_file_path = r"YOUR/INPUT/FILE.docx"
output_file_path = r"YOUR/OUTPUT/FILE.docx"

# Send a file to Glasswall's Rebuild API
with open(input_file_path, "rb") as f:
    response = requests.post(
        url=url,
        files=[("file", f)],
        headers={
            "x-api-key": api_key,
            "accept": "application/octet-stream"
        }
    )

if response.status_code == 200 and response.content:
    # Glasswall has now sanitised and returned this file
    # Create output directory if it does not already exist
    os.makedirs(os.path.dirname(output_file_path), exist_ok=True)
    # Write the sanitised file to output_file_path
    with open(output_file_path, "wb") as f:
        f.write(response.content)
    print("Successfully wrote file to:", os.path.abspath(output_file_path))
else:
    # An error occurred, raise it
    response.raise_for_status()
```

</TabItem>
<TabItem value="c#">

```csharp
using System;
using System.Globalization;
using System.IO;
using System.Net.Http;
using System.Threading;
using System.Threading.Tasks;

const string apiKey = "<YOUR API KEY>";
const string inputFilePath = "<INPUT FILE PATH>";
const url = "https://8oiyjy8w63.execute-api.us-west-2.amazonaws.com/Prod/api/rebuild/file";

// Formatting the request
var request = new HttpRequestMessage(HttpMethod.Post, url);
request.Headers.Add("Accept", "application/octet-stream");
request.Headers.Add("x-api-key", apiKey);

request.Content = new MultipartFormDataContent("Boundary----" + DateTime.Now.ToString(CultureInfo.InvariantCulture))
{
    {new ByteArrayContent(File.ReadAllBytes(inputFilePath)), "file", "/" + inputFilePath}
};

using (var client = new HttpClient())
{
    // Send a file to Glasswall's Rebuild API
    using (var message = await client.SendAsync(request, CancellationToken.None))
    {
        var rebuiltFile = await message.Content.ReadAsByteArrayAsync();

        const outputFilePath = "<REBUILT FILE OUTPUT PATH>"

        if (message.StatusCode == HttpStatusCode.OK && message.Content != null)
        {
            // Glasswall has now sanitised and returned this file
            var rebuiltFile = await message.Content.ReadAsByteArrayAsync();

            System.IO.File.WriteAllBytes(outputFilePath, rebuiltFile);
        }
    }
}
```

</TabItem>
</Tabs>
</div>
<p>In the next documents, there will be infomation surrounding how the API works, how to configure requests and alternative endpoints to use.</p>